var Q=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var D=Math.pow,R=(e,t,o)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,_=(e,t)=>{for(var o in t||(t={}))ee.call(t,o)&&R(e,o,t[o]);if(W)for(var o of W(t))te.call(t,o)&&R(e,o,t[o]);return e},C=(e,t)=>Y(e,Z(t));var M=(e,t,o)=>new Promise((s,n)=>{var r=c=>{try{i(o.next(c))}catch(p){n(p)}},a=c=>{try{i(o.throw(c))}catch(p){n(p)}},i=c=>c.done?s(c.value):Promise.resolve(c.value).then(r,a);i((o=o.apply(e,t)).next())});const oe=new Set(["title","titleTemplate","script","style","noscript"]),S=new Set(["base","meta","link","style","script","noscript"]),se=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),ne=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),G=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),re=typeof window!="undefined";function De(e){return e}function x(e){let t=9;for(let o=0;o<e.length;)t=Math.imul(t^e.charCodeAt(o++),D(9,9));return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function E(e){if(e._h)return e._h;if(e._d)return x(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const o in e.props)t+=`${o}:${String(e.props[o])},`;return x(t)}function ie(e,t){return e instanceof Promise?e.then(t):t(e)}function $(e,t,o,s){const n=s||N(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?_({},t):{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(n instanceof Promise)return n.then(a=>$(e,t,o,a));const r={tag:e,props:n};for(const a of G){const i=r.props[a]!==void 0?r.props[a]:o[a];i!==void 0&&((!(a==="innerHTML"||a==="textContent"||a==="children")||oe.has(r.tag))&&(r[a==="children"?"innerHTML":a]=i),delete r.props[a])}return r.props.body&&(r.tagPosition="bodyClose",delete r.props.body),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(a=>C(_({},r),{props:C(_({},r.props),{content:a})})):r}function ae(e,t){var s;const o=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,n])=>n).map(([n,r])=>e==="style"?`${n}:${r}`:n)),(s=String(Array.isArray(t)?t.join(o):t))==null?void 0:s.split(o).filter(n=>!!n.trim()).join(o)}function J(e,t,o,s){for(let n=s;n<o.length;n+=1){const r=o[n];if(r==="class"||r==="style"){e[r]=ae(r,e[r]);continue}if(e[r]instanceof Promise)return e[r].then(a=>(e[r]=a,J(e,t,o,n)));if(!t&&!G.has(r)){const a=String(e[r]),i=r.startsWith("data-");a==="true"||a===""?e[r]=i?"true":!0:e[r]||(i&&a==="false"?e[r]="false":delete e[r])}}}function N(e,t=!1){const o=J(e,t,Object.keys(e),0);return o instanceof Promise?o.then(()=>e):e}const le=10;function V(e,t,o){for(let s=o;s<t.length;s+=1){const n=t[s];if(n instanceof Promise)return n.then(r=>(t[s]=r,V(e,t,s)));Array.isArray(n)?e.push(...n):e.push(n)}}function ce(e){const t=[],o=e.resolvedInput;for(const n in o){if(!Object.prototype.hasOwnProperty.call(o,n))continue;const r=o[n];if(!(r===void 0||!se.has(n))){if(Array.isArray(r)){for(const a of r)t.push($(n,a,e));continue}t.push($(n,r,e))}}if(t.length===0)return[];const s=[];return ie(V(s,t,0),()=>s.map((n,r)=>(n._e=e._i,e.mode&&(n._m=e.mode),n._p=(e._i<<le)+r,n)))}const I=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),U={base:-10,title:10},K={critical:-80,high:-10,low:20};function L(e){const t=e.tagPriority;if(typeof t=="number")return t;let o=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?o=-30:e.props.charset?o=-20:e.props.name==="viewport"&&(o=-15):e.tag==="link"&&e.props.rel==="preconnect"?o=20:e.tag in U&&(o=U[e.tag]),t&&t in K?o+K[t]:o}const fe=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],pe=["name","property","http-equiv"];function F(e){const{props:t,tag:o}=e;if(ne.has(o))return o;if(o==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${o}:id:${t.id}`;for(const s of pe)if(t[s]!==void 0)return`${o}:${s}:${t[s]}`;return!1}const v="%separator";function de(e,t,o=!1){var n;let s;if(t==="s"||t==="pageTitle")s=e.pageTitle;else if(t.includes(".")){const r=t.indexOf(".");s=(n=e[t.substring(0,r)])==null?void 0:n[t.substring(r+1)]}else s=e[t];if(s!==void 0)return o?(s||"").replace(/"/g,'\\"'):s||""}const ue=new RegExp(`${v}(?:\\s*${v})*`,"g");function A(e,t,o,s=!1){if(typeof e!="string"||!e.includes("%"))return e;let n=e;try{n=decodeURI(e)}catch(i){}const r=n.match(/%\w+(?:\.\w+)?/g);if(!r)return e;const a=e.includes(v);return e=e.replace(/%\w+(?:\.\w+)?/g,i=>{if(i===v||!r.includes(i))return i;const c=de(t,i.slice(1),s);return c!==void 0?c:i}).trim(),a&&(e.endsWith(v)&&(e=e.slice(0,-v.length)),e.startsWith(v)&&(e=e.slice(v.length)),e=e.replace(ue,o).trim()),e}function q(e,t){return e==null?t||null:typeof e=="function"?e(t):e}function he(o){return M(this,arguments,function*(e,t={}){const s=t.document||e.resolvedOptions.document;if(!s||!e.dirty)return;const n={shouldRender:!0,tags:[]};if(yield e.hooks.callHook("dom:beforeRender",n),!!n.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(r=>M(this,null,function*(){var b;const a=(yield e.resolveTags()).map(l=>({tag:l,id:S.has(l.tag)?E(l):l.tag,shouldRender:!0}));let i=e._dom;if(!i){i={elMap:{htmlAttrs:s.documentElement,bodyAttrs:s.body}};const l=new Set;for(const f of["body","head"]){const u=(b=s[f])==null?void 0:b.children;for(const y of u){const g=y.tagName.toLowerCase();if(!S.has(g))continue;const k={tag:g,props:yield N(y.getAttributeNames().reduce((T,w)=>C(_({},T),{[w]:y.getAttribute(w)}),{})),innerHTML:y.innerHTML},H=F(k);let m=H,P=1;for(;m&&l.has(m);)m=`${H}:${P++}`;m&&(k._d=m,l.add(m)),i.elMap[y.getAttribute("data-hid")||E(k)]=y}}}i.pendingSideEffects=_({},i.sideEffects),i.sideEffects={};function c(l,f,u){const y=`${l}:${f}`;i.sideEffects[y]=u,delete i.pendingSideEffects[y]}function p({id:l,$el:f,tag:u}){const y=u.tag.endsWith("Attrs");if(i.elMap[l]=f,y||(u.textContent&&u.textContent!==f.textContent&&(f.textContent=u.textContent),u.innerHTML&&u.innerHTML!==f.innerHTML&&(f.innerHTML=u.innerHTML),c(l,"el",()=>{var g;(g=i.elMap[l])==null||g.remove(),delete i.elMap[l]})),u._eventHandlers)for(const g in u._eventHandlers)Object.prototype.hasOwnProperty.call(u._eventHandlers,g)&&f.getAttribute(`data-${g}`)!==""&&((u.tag==="bodyAttrs"?s.defaultView:f).addEventListener(g.substring(2),u._eventHandlers[g].bind(f)),f.setAttribute(`data-${g}`,""));for(const g in u.props){if(!Object.prototype.hasOwnProperty.call(u.props,g))continue;const k=u.props[g],H=`attr:${g}`;if(g==="class"){if(!k)continue;for(const m of k.split(" "))y&&c(l,`${H}:${m}`,()=>f.classList.remove(m)),!f.classList.contains(m)&&f.classList.add(m)}else if(g==="style"){if(!k)continue;for(const m of k.split(";")){const P=m.indexOf(":"),T=m.substring(0,P).trim(),w=m.substring(P+1).trim();c(l,`${H}:${T}`,()=>{f.style.removeProperty(T)}),f.style.setProperty(T,w)}}else f.getAttribute(g)!==k&&f.setAttribute(g,k===!0?"":String(k)),y&&c(l,H,()=>f.removeAttribute(g))}}const d=[],h={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const l of a){const{tag:f,shouldRender:u,id:y}=l;if(u){if(f.tag==="title"){s.title=f.textContent;continue}l.$el=l.$el||i.elMap[y],l.$el?p(l):S.has(f.tag)&&d.push(l)}}for(const l of d){const f=l.tag.tagPosition||"head";l.$el=s.createElement(l.tag.tag),p(l),h[f]=h[f]||s.createDocumentFragment(),h[f].appendChild(l.$el)}for(const l of a)yield e.hooks.callHook("dom:renderTag",l,s,c);h.head&&s.head.appendChild(h.head),h.bodyOpen&&s.body.insertBefore(h.bodyOpen,s.body.firstChild),h.bodyClose&&s.body.appendChild(h.bodyClose);for(const l in i.pendingSideEffects)i.pendingSideEffects[l]();e._dom=i,yield e.hooks.callHook("dom:rendered",{renders:a}),r()})).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise})}function ge(e,t={}){const o=t.delayFn||(s=>setTimeout(s,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(s=>o(()=>he(e,t).then(()=>{delete e._domDebouncedUpdatePromise,s()})))}function ye(e){return t=>{var s,n;const o=((n=(s=t.resolvedOptions.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:n.innerHTML)||!1;return o&&t.push(JSON.parse(o)),{mode:"client",hooks:{"entries:updated":r=>{ge(r,e)}}}}}function j(e,t={},o){for(const s in e){const n=e[s],r=o?`${o}:${s}`:s;typeof n=="object"&&n!==null?j(n,t,r):typeof n=="function"&&(t[r]=n)}return t}const me={run:e=>e()},ke=()=>me,X=typeof console.createTask!="undefined"?console.createTask:ke;function _e(e,t){const o=t.shift(),s=X(o);return e.reduce((n,r)=>n.then(()=>s.run(()=>r(...t))),Promise.resolve())}function be(e,t){const o=t.shift(),s=X(o);return Promise.all(e.map(n=>s.run(()=>n(...t))))}function O(e,t){for(const o of[...e])o(t)}class ve{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,o,s={}){if(!t||typeof o!="function")return()=>{};const n=t;let r;for(;this._deprecatedHooks[t];)r=this._deprecatedHooks[t],t=r.to;if(r&&!s.allowDeprecated){let a=r.message;a||(a=`${n} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(a)||this._deprecatedMessages.add(a)}if(!o.name)try{Object.defineProperty(o,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch(a){}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(o),()=>{o&&(this.removeHook(t,o),o=void 0)}}hookOnce(t,o){let s,n=(...r)=>(typeof s=="function"&&s(),s=void 0,n=void 0,o(...r));return s=this.hook(t,n),s}removeHook(t,o){if(this._hooks[t]){const s=this._hooks[t].indexOf(o);s!==-1&&this._hooks[t].splice(s,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,o){this._deprecatedHooks[t]=typeof o=="string"?{to:o}:o;const s=this._hooks[t]||[];delete this._hooks[t];for(const n of s)this.hook(t,n)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const o in t)this.deprecateHook(o,t[o])}addHooks(t){const o=j(t),s=Object.keys(o).map(n=>this.hook(n,o[n]));return()=>{for(const n of s.splice(0,s.length))n()}}removeHooks(t){const o=j(t);for(const s in o)this.removeHook(s,o[s])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...o){return o.unshift(t),this.callHookWith(_e,t,...o)}callHookParallel(t,...o){return o.unshift(t),this.callHookWith(be,t,...o)}callHookWith(t,o,...s){const n=this._before||this._after?{name:o,args:s,context:{}}:void 0;this._before&&O(this._before,n);const r=t(o in this._hooks?[...this._hooks[o]]:[],s);return r instanceof Promise?r.finally(()=>{this._after&&n&&O(this._after,n)}):(this._after&&n&&O(this._after,n),r)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const o=this._before.indexOf(t);o!==-1&&this._before.splice(o,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const o=this._after.indexOf(t);o!==-1&&this._after.splice(o,1)}}}}function He(){return new ve}const Te=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Pe={hooks:{"tag:normalise":({tag:e})=>{e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.key&&(e.key=e.props.key,delete e.props.key);const t=F(e);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete e.key;const o=t||(e.key?`${e.tag}:${e.key}`:!1);o&&(e._d=o)},"tags:resolve":e=>{const t=Object.create(null);for(const s of e.tags){const n=(s.key?`${s.tag}:${s.key}`:s._d)||E(s),r=t[n];if(r){let i=s==null?void 0:s.tagDuplicateStrategy;if(!i&&Te.has(s.tag)&&(i="merge"),i==="merge"){const c=r.props;c.style&&s.props.style&&(c.style[c.style.length-1]!==";"&&(c.style+=";"),s.props.style=`${c.style} ${s.props.style}`),c.class&&s.props.class?s.props.class=`${c.class} ${s.props.class}`:c.class&&(s.props.class=c.class),t[n].props=_(_({},c),s.props);continue}else if(s._e===r._e){r._duped=r._duped||[],s._d=`${r._d}:${r._duped.length+1}`,r._duped.push(s);continue}else if(L(s)>L(r))continue}if(!(s.innerHTML||s.textContent||Object.keys(s.props).length!==0)&&S.has(s.tag)){delete t[n];continue}t[n]=s}const o=[];for(const s in t){const n=t[s],r=n._duped;o.push(n),r&&(delete n._duped,o.push(...r))}e.tags=o,e.tags=e.tags.filter(s=>!(s.tag==="meta"&&(s.props.name||s.props.property)&&!s.props.content))}}},we=new Set(["script","link","bodyAttrs"]),Ce=e=>({hooks:{"tags:resolve":t=>{for(const o of t.tags){if(!we.has(o.tag))continue;const s=o.props;for(const n in s){if(n[0]!=="o"||n[1]!=="n"||!Object.prototype.hasOwnProperty.call(s,n))continue;const r=s[n];typeof r=="function"&&(e.ssr&&I.has(n)?s[n]=`this.dataset.${n}fired = true`:delete s[n],o._eventHandlers=o._eventHandlers||{},o._eventHandlers[n]=r)}e.ssr&&o._eventHandlers&&(o.props.src||o.props.href)&&(o.key=o.key||x(o.props.src||o.props.href))}},"dom:renderTag":({$el:t,tag:o})=>{var n,r;const s=t==null?void 0:t.dataset;if(s)for(const a in s){if(!a.endsWith("fired"))continue;const i=a.slice(0,-5);I.has(i)&&((r=(n=o._eventHandlers)==null?void 0:n[i])==null||r.call(t,new Event(i.substring(2))))}}}}),Me=new Set(["link","style","script","noscript"]),Ae={hooks:{"tag:normalise":({tag:e})=>{e.key&&Me.has(e.tag)&&(e.props["data-hid"]=e._h=x(e.key))}}},Se={mode:"server",hooks:{"tags:beforeResolve":e=>{const t={};let o=!1;for(const s of e.tags)s._m!=="server"||s.tag!=="titleTemplate"&&s.tag!=="templateParams"&&s.tag!=="title"||(t[s.tag]=s.tag==="title"||s.tag==="titleTemplate"?s.textContent:s.props,o=!0);o&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},xe={hooks:{"tags:resolve":e=>{var t;for(const o of e.tags)if(typeof o.tagPriority=="string")for(const{prefix:s,offset:n}of fe){if(!o.tagPriority.startsWith(s))continue;const r=o.tagPriority.substring(s.length),a=(t=e.tags.find(i=>i._d===r))==null?void 0:t._p;if(a!==void 0){o._p=a+n;break}}e.tags.sort((o,s)=>{const n=L(o),r=L(s);return n<r?-1:n>r?1:o._p-s._p})}}},Le={meta:"content",link:"href",htmlAttrs:"lang"},Oe=["innerHTML","textContent"],Ee=e=>({hooks:{"tags:resolve":t=>{var a;const{tags:o}=t;let s;for(let i=0;i<o.length;i+=1)o[i].tag==="templateParams"&&(s=t.tags.splice(i,1)[0].props,i-=1);const n=s||{},r=n.separator||"|";delete n.separator,n.pageTitle=A(n.pageTitle||((a=o.find(i=>i.tag==="title"))==null?void 0:a.textContent)||"",n,r);for(const i of o){if(i.processTemplateParams===!1)continue;const c=Le[i.tag];if(c&&typeof i.props[c]=="string")i.props[c]=A(i.props[c],n,r);else if(i.processTemplateParams||i.tag==="titleTemplate"||i.tag==="title")for(const p of Oe)typeof i[p]=="string"&&(i[p]=A(i[p],n,r,i.tag==="script"&&i.props.type.endsWith("json")))}e._templateParams=n,e._separator=r},"tags:afterResolve":({tags:t})=>{let o;for(let s=0;s<t.length;s+=1){const n=t[s];n.tag==="title"&&n.processTemplateParams!==!1&&(o=n)}o!=null&&o.textContent&&(o.textContent=A(o.textContent,e._templateParams,e._separator))}}}),$e={hooks:{"tags:resolve":e=>{const{tags:t}=e;let o,s;for(let n=0;n<t.length;n+=1){const r=t[n];r.tag==="title"?o=r:r.tag==="titleTemplate"&&(s=r)}if(s&&o){const n=q(s.textContent,o.textContent);n!==null?o.textContent=n||o.textContent:e.tags.splice(e.tags.indexOf(o),1)}else if(s){const n=q(s.textContent);n!==null&&(s.textContent=n,s.tag="title",s=void 0)}s&&e.tags.splice(e.tags.indexOf(s),1)}}},je={hooks:{"tags:afterResolve":e=>{for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let z;function Ie(e={}){const t=We(e);return t.use(ye()),z=t}function B(e,t){return!e||e==="server"&&t||e==="client"&&!t}function We(e={}){const t=He();t.addHooks(e.hooks||{}),e.document=e.document||(re?document:void 0);const o=!e.document,s=()=>{i.dirty=!0,t.callHook("entries:updated",i)};let n=0,r=[];const a=[],i={plugins:a,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return r},use(p){const d=typeof p=="function"?p(i):p;(!d.key||!a.some(h=>h.key===d.key))&&(a.push(d),B(d.mode,o)&&t.addHooks(d.hooks||{}))},push(p,d){d==null||delete d.head;const h=_({_i:n++,input:p},d);return B(h.mode,o)&&(r.push(h),s()),{dispose(){r=r.filter(b=>b._i!==h._i),s()},patch(b){for(const l of r)l._i===h._i&&(l.input=h.input=b);s()}}},resolveTags(){return M(this,null,function*(){const p={tags:[],entries:[...r]};yield t.callHook("entries:resolve",p);for(const d of p.entries){const h=d.resolvedInput||d.input;if(d.resolvedInput=yield d.transform?d.transform(h):h,d.resolvedInput)for(const b of yield ce(d)){const l={tag:b,entry:d,resolvedOptions:i.resolvedOptions};yield t.callHook("tag:normalise",l),p.tags.push(l.tag)}}return yield t.callHook("tags:beforeResolve",p),yield t.callHook("tags:resolve",p),yield t.callHook("tags:afterResolve",p),p.tags})},ssr:o};return[Pe,Se,Ce,Ae,xe,Ee,$e,je,...(e==null?void 0:e.plugins)||[]].forEach(p=>i.use(p)),i.hooks.callHook("init",i),i}function Ue(){return z}export{Ie as c,De as d,Ue as g};
